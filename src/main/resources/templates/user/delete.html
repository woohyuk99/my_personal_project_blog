<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <title>회원 탈퇴</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<h1>회원 탈퇴</h1>
<a href="/">돌아가기</a><br><br>

<form id="deleteForm" onsubmit="return false;">
    <label>id
        <input id="did" type="number" value="1">
    </label><br><br>
    <button type="button" onclick="deleteUser()">삭제</button>
</form>

<pre id="result"></pre>

<script>
    function deleteUser() {
        const id = document.getElementById("did").value;
        if (!id) {
            alert("id를 입력하세요");
            return;
        }

        axios.delete(`/api/users/${id}`)
            .then(res => {
                document.getElementById("result").textContent =
                    `삭제 성공\n상태코드: ${res.status}`;
            })
            .catch(err => {
                if (err.response) {
                    document.getElementById("result").textContent =
                        `오류 발생\n상태코드: ${err.response.status}\n\n${JSON.stringify(err.response.data, null, 2)}`;
                } else {
                    document.getElementById("result").textContent = err.message;
                }
            });
    }
</script>

</body>
</html>
